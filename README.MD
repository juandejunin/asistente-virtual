# ğŸŒ¤ï¸ AplicaciÃ³n de Clima con Notificaciones por Telegram
DescripciÃ³n

Esta aplicaciÃ³n permite obtener informaciÃ³n meteorolÃ³gica de una ciudad especÃ­fica y enviar notificaciones automÃ¡ticas de clima a Telegram.
AdemÃ¡s, cuenta con un servicio web REST para consultar el clima en tiempo real y para configurar dinÃ¡micamente la ciudad y el horario de envÃ­o de las notificaciones.

ğŸ—ï¸ Estructura del Proyecto

```
src/
â”œâ”€ config/
â”‚  â””â”€ Server.ts            # ConfiguraciÃ³n y arranque del servidor HTTP + WebSocket
â”œâ”€ controllers/
â”‚  â”œâ”€ WeatherController.ts # LÃ³gica para endpoints de clima
â”‚  â””â”€ ConfigController.ts  # LÃ³gica para endpoints de configuraciÃ³n (ciudad y horario)
â”œâ”€ cron/
â”‚  â””â”€ weatherCron.ts       # Cron job para enviar actualizaciones automÃ¡ticas
â”œâ”€ routes/
â”‚  â”œâ”€ weather.routes.ts    # Rutas para consultar clima
â”‚  â””â”€ config.routes.ts     # Rutas para configurar ciudad y horario
â”œâ”€ services/
â”‚  â”œâ”€ WeatherService.ts    # Servicio que obtiene datos de OpenWeather
â”‚  â”œâ”€ WeatherNotifier.ts   # Servicio que envÃ­a mensajes a Telegram
â”‚  â”œâ”€ TelegramService.ts   # Servicio que envÃ­a mensajes usando API de Telegram
â”‚  â””â”€ ConfigService.ts     # Servicio que maneja la configuraciÃ³n dinÃ¡mica
â”œâ”€ scripts/
â”‚  â””â”€ sendWeatherMessage.ts # Script independiente para enviar el clima una vez
â””â”€ index.ts                # Punto de entrada principal de la aplicaciÃ³n


```
## âš™ï¸ Funcionalidad

Obtener el clima actual de la ciudad configurada

```
Endpoint: GET /api/weather/today
```
Devuelve el estado del clima, temperatura y humedad.

Configurar la ciudad y horario de notificaciÃ³n
```
Endpoint: GET /api/config â†’ Ver configuraciÃ³n actual

Endpoint: POST /api/config â†’ Actualizar ciudad y/o horario del cron
```
El cron se reinicia automÃ¡ticamente al actualizar la configuraciÃ³n.

Notificaciones automÃ¡ticas de clima vÃ­a Telegram

El cron se ejecuta segÃºn la configuraciÃ³n y envÃ­a un mensaje a un chat de Telegram con:
```
Ciudad

Estado del clima

Temperatura

Humedad
```

### Soporte de errores

Maneja cuerpos de request que no sean JSON o estÃ©n mal formados.

Devuelve errores claros (400 Bad Request, 415 Unsupported Media Type).


## ğŸ› ï¸ TecnologÃ­as utilizadas

Node.js con TypeScript â†’ Backend tipado y moderno

Express.js â†’ Servidor HTTP y rutas REST

WebSocket (ws) â†’ ComunicaciÃ³n en tiempo real opcional

node-cron â†’ Tareas programadas para enviar clima automÃ¡ticamente

OpenWeather API â†’ Fuente de datos meteorolÃ³gicos

Telegram Bot API â†’ EnvÃ­o de mensajes al chat de Telegram

dotenv â†’ Variables de entorno para configuraciÃ³n segura


## ğŸƒâ€â™‚ï¸ CÃ³mo ejecutar la aplicaciÃ³n

Clonar el repositorio
```
git clone <url-del-repo>
cd <nombre-del-repo>
```

Instalar dependencias
```
npm install
```

Configurar variables de entorno
Crear un archivo .env con:

```
PORT=3000
CITY=Buenos Aires
OPENWEATHER_API_KEY=<tu_api_key>
TELEGRAM_TOKEN=<tu_token>
TELEGRAM_CHAT_ID=<tu_chat_id>
```

Iniciar la aplicaciÃ³n
```
npm run dev
```

Endpoints disponibles
```
MÃ©todo	Ruta	DescripciÃ³n
GET	/api/weather/today	Obtener clima actual
GET	/api/config	Ver configuraciÃ³n actual
POST	/api/config	Actualizar ciudad y/o horario
POST	/api/config/city	Actualizar solo la ciudad
POST	/api/config/schedule	Actualizar solo el horario del cron

```
ğŸ’¡ Notas

Los cambios de ciudad y horario se aplican dinÃ¡micamente, sin reiniciar el servidor.

La configuraciÃ³n actual se mantiene en memoria, pero se puede extender para persistir en archivo JSON o base de datos.

Los mensajes de Telegram siempre reflejan la ciudad actual configurada, no la del .env.